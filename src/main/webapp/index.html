<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>日志中心</title>
    <link rel="stylesheet" href="layui/css/layui.css">
    <script src="js/jquery-1.7.2.js"></script>
    <script src="layui/layui.js" type="text/javascript"></script>
    <!--<script type="text/javascript" src="js/jquery-1.4.4.min.js"></script>-->
    <script type="text/javascript" src="js/jquery.ztree.core.js"></script>
    <script type="text/javascript" src="js/jquery.ztree.excheck.js"></script>
    <script type="text/javascript" src="js/jquery.ztree.exedit.js"></script>
    <link rel="stylesheet" href="css/zTreeStyle/zTreeStyle.css" type="text/css">
    <style>
        .left{
            float:left;
            width: 30%;
        }
        #left_top{
            display: flex;
            flex-direction: column;
            justify-content: center;
        }
        #seachFilePath, #seachFilePathDetail{
            margin-left:30%;
        }
        .right{
            float:right;
            width: 70%;
        }
        #cntent{
            display: flex;
            justify-content: center;
        }
        #input_box{
            display: flex;
        }
        .layui-input-block{
            margin-left: 200px;
        }
    </style>
</head>
<body>
<div class="right" style="position: relative;">
    <div class="layui-input-block" id="keyWord" style="margin-top:5px;">
        <label class="layui-form-label">关键字</label>
        <div id="input_box" class="layui-input-inline">
            <input type="text" id="searchByTime" lay-verify="required" style="width:200px;"
                   placeholder="请输入日志时间" data-provide="typeahead" class="layui-input" autocomplete="off">
            <select id="searchByLevel" name="city" lay-verify="" list="levelList" lay-verify="required" style="width:200px;"
                    placeholder="请输入日志等级" data-provide="typeahead" class="layui-input" autocomplete="off">
                <option value="">选择级别</option>
                <option value="INFO">INFO</option>
                <option value="FATAL">FATAL</option>
                <option value="WARN">WARN</option>
                <option value="ERROR">ERROR</option>
                <option value="DEBUG">DEBUG</option>
            </select>
            <!--<input type="hide" name="RegisterCompanyId" id="hiddenRegisterCompanyId_searchForm" />-->
        </div>
        <button type="text" id="foundPath" style="position: absolute;left: 700px;top: 0px;" class="layui-btn layui-btn-normal">查找</button>
    </div>

    <ul id="biuuu_city_list"></ul>
    <br />
    <br />
    <div id="content"class="xxx" style="margin-left: 0px">无</div>
    <script>
        layui.use(['laypage', 'layer'], function () {
            var laypage = layui.laypage
                , layer = layui.layer;
            $('#foundPath').on('click',function(){
                var searchByTime = $('#searchByTime').val();
                var searchByLevel = $('#searchByLevel').val();
                console.log(searchByTime);
                console.log(searchByLevel);
                $.ajax({
                    url: 'logController/getKey',
                    type: 'post',
                    data: {
                        searchByTime: searchByTime,
                        searchByLevel: searchByLevel
                    },
                    dataType:'json',
                    success:function(data){
                        console.log(data)
                        //调用分页
                        laypage.render({
                            elem: 'content'
                            , count: data.length
                            , limit:1000
                                ,jump: function (obj) {
                                //模拟渲染
                                    document.getElementById('biuuu_city_list').innerHTML = function () {
                                    var arr = []
                                        , thisData = data.concat().splice(obj.curr * obj.limit - obj.limit, obj.limit);
                                    layui.each(thisData, function(i,v){
                                        $('#content').append((i+1)+". "+v.path+" "+v.level+" "+v.date+" "+v.detail+"<br>");
                                    });
                                    return arr.join('');
                                }();
                            }
                        });
                    }
                });
            })

            // //调用分页
            // laypage.render({
            //     elem: 'content'
            //     , count: data.length
            //     , limit:20
            //     ,jump: function (obj) {
            //         //模拟渲染
            //         document.getElementById('biuuu_city_list').innerHTML = function () {
            //             var arr = []
            //                 , thisData = data.concat().splice(obj.curr * obj.limit - obj.limit, obj.limit);
            //             layui.each(thisData, function (index, item) {
            //                 arr.push('<li>' + item + '</li>');
            //             });
            //             return arr.join('');
            //         }();
            //     }
            // });

        });
    </script>


</div>




<div id="left_top">
    <input type="text" id="seachFilePath" lay-verify="required" style="width:200px;"
           placeholder="请输入目录地址" data-provide="typeahead" class="layui-input" autocomplete="off">
    <input type="text" id="seachFilePathDetail" lay-verify="required" style="width:200px;"
           placeholder="精确地址" data-provide="typeahead" class="layui-input" autocomplete="off">
    <button type="text" style="margin-left: 30%; width: 100px;text-align: center;" id="findFilepPath" class="layui-btn layui-btn-normal">查找</button>
    <div class="left">
        <div id="tree">
        </div>
    </div>
    <script>
        $('#findFilepPath').on('click',function(){
            var seachFilePath = $('#seachFilePath').val();
            var seachFilePathDetail = $('#seachFilePathDetail').val();
            console.log(seachFilePath);
            console.log(seachFilePathDetail);
            $.ajax({
                url: 'logController/creatTree',
                type: 'get',
                data: {
                    searchByTime: seachFilePath,
                    searchByLevel: seachFilePathDetail
                },
                dataType:'json',
                success:function(data){
                    console.log(data)

                }
            });
        })

    </script>
</div>




<script type="text/javascript">
    layui.use('tree', function(){
        var tree = layui.tree;

        //渲染
        var inst1 = tree.render({
            showLine:false ,
            elem: '#tree'  //绑定元素
            ,data: [{
                title: '江西' //一级菜单
                ,children: [{
                    title: '南昌' //二级菜单
                    ,children: [{
                        title: '高新区' //三级菜单
                        //…… //以此类推，可无限层级
                    }]
                }]
            },{
                title: '陕西' //一级菜单
                ,children: [{
                    title: '西安' //二级菜单
                }]
            }]
        });
    });

    // $('#foundPath').on('click',function(){
    //     var searchByTime = $('#searchByTime').val();
    //     var searchByLevel = $('#searchByLevel').val();
    //     console.log(searchByTime);
    //     console.log(searchByLevel);
    //     $.ajax({
    //         url: 'logController/getKey',
    //         type: 'post',
    //         data: {
    //             searchByTime: searchByTime,
    //             searchByLevel: searchByLevel
    //         },
    //         dataType:'json',
    //         success:function(data){
    //             console.log(data)
    //             $('#content').text("");
    //             $.each(data,function(i,v){
    //                 $('#content').append((i+1)+". "+v.path+" "+v.level+" "+v.date+" "+v.detail+"<br>");
    //             });
    //         }
    //     });
    // })



</script>

</body>